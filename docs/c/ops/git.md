# Git

## Мысли

### Ветки не нужны

- Часто бывают ситуации, когда сделал фичу в отдельной ветке, и о ней забывают, или вспоминают спустя месяц, когда
  мастер-ветка уже уехала вперед, еще часто возникают конфликты - нах это надо?
- Лучше сразу в мастер и обмазывать фича-флагами новый функционал
- И хорошо уметь быстро откатывать изменения

## Как добавить фана в коммиты?

Юзать [gitmoji](https://gitmoji.dev/)

## Шаблон коммитов

### Что это?

- Для сообщений в коммите можно использовать шаблоны
- Полезно, чтобы напомнить себе, что нужно указать тикет в сообщении
- Или когда нужно коммитить, придерживаясь структуры

### Как сделать?

- Создать файл `.gitmessage` - в нем описываем шаблон
- Используем `#` для комментариев - они в коммит попадать не будут
- Выставить шаблон в гите:

```
git config commit.template ~/.gitmessage
```

- [Источник](https://gist.github.com/lisawolderiksen/a7b99d94c92c6671181611be1641c733)

### Пример шаблона

```
# Что было сделано
:gitmoji:

# Ссылка на доку
:memo:
# Ссылка на задачу
:ticket:
```

## Как удалить файл из истории (всех коммитов)

Использовать [BFG Repo-Cleaner](https://github.com/rtyley/bfg-repo-cleaner)

## Pre-commit хуки

- Что это: запуск проверок/сборки/чего-угодно-что-в-ci-запускается перед коммитом
- Как сделать: использовать [pre-commit](https://pre-commit.com/)
- Вообще идея не оч, потому что замедляет разработку, лучше развернуть полноценный сиай:

<iframe width="560" height="315" src="https://www.youtube.com/embed/-A0_RLl6udE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

- Но если лень поднимать сиай, то можно и хуки юзать