{% extends "templates/base.html" %}
{% set title = 'Домашняя' %}
{% set desc = 'блог по настроению • свалка мыслей, пет проджекты, обзоры на всё и вся • v4' %}

{% block static %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='air-datepicker.css') }}">

{% endblock %}

{% from "templates/components/sections.html" import link_section,page_section %}

{% block main %}
    <div class="flex justify-between mb-2">
        <a href="/feed/{{ prev_date }}"
           class="{% if not prev_date %}invisible{% endif %} btn btn-square btn-ghost btn-sm md:btn-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                2
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"/>
            </svg>
        </a>
        <div class="btn btn-ghost btn-sm md:btn-md" onclick="toggleCalendar()">
            <input hidden="" id="date">

            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"/>
            </svg>


            {{ feed_date or today_date }}

        </div>
        <a href="/feed/{{ next_date }}"
           class="{% if not next_date %}invisible{% endif %} btn btn-square btn-ghost btn-sm md:btn-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
            </svg>
        </a>
    </div>



{% endblock %}

{% block footer %}

    <div class="flex items-center gap-4 py-2">
        <div class="flex-1 h-[1px] bg-neutral-300 w-full inline-block"></div>
        <h2 class=" inline-block text-center">штучки</h2>
        <div class="flex-1 h-[1px] bg-neutral-300 w-full inline-block"></div>
    </div>

    <div class="grid  md:grid-cols-2 gap-2">

        <a class="btn w-full  btn-outline " href="/stuff/recipes">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"/>
            </svg>
            Рецепты
        </a>
        <a class="btn w-full  btn-outline " href="/stuff/recipes">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"/>
            </svg>

            Тудушки
        </a>
        <a class="btn w-full  btn-outline " href="/stuff/recipes">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"/>
            </svg>


            Привычки
        </a>
        <a class="btn w-full  btn-outline " href="/special/beer/base">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                 stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"/>
            </svg>


            Пиво
        </a>
    </div>


{% endblock %}

{% block script %}
    <script src="{{ url_for("static", filename="js/air-datepicker.js") }}"></script>
    <script>
        let dateToStr = (date) => new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate())).toISOString().slice(0, 10)

        let calendar = new AirDatepicker('#date', {
                // /feed/2024-03-28 > 2024-03-28
                startDate: new URL(window.location.href).pathname.split('/')[2] ?? new Date(),
                isMobile: true,
                autoClose: true,
                onSelect({date}) {
                    window.location.href = `/feed/${dateToStr(date)}`
                },
                onRenderCell: ({date}) => {
                    if (dateToStr(date) < '2024-03-27' || (date > new Date())) {
                        return {
                            disabled: true
                        }
                    }
                },

            })
        ;

        function toggleCalendar() {

            calendar.visible ? calendar.hide() : calendar.show();

        }

    </script>
{% endblock %}